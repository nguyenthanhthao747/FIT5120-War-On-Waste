<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>C&D Waste</title>
    {% load static %}
    <!-- Bootstrap core CSS -->
    <link href="{% static 'css/bootstrap.css'%}" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="https://fonts.googleapis.com/css?family=Lora:400,700|Raleway:400,700" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,300i,400,400i,500,500i,600,600i,700,700i|Playfair+Display:400,400i,700,700i,900,900i"
          rel="stylesheet">

    <!-- Bootstrap core JavaScript -->
    <script src="{% static 'jquery/jquery.min.js'%}"></script>
    <script src="{% static 'js/bootstrap.bundle.js'%}"></script>
    <link href="{% static 'lib/bootstrap/css/bootstrap.min.css'%}" rel="stylesheet">

    <!-- Libraries CSS Files -->
    <link href="{% static 'lib/ionicons/css/ionicons.min.css'%}" rel="stylesheet">
    <link href="{% static 'lib/owlcarousel/assets/owl.carousel.min.css'%}" rel="stylesheet">
    <link href="{% static 'lib/magnific-popup/magnific-popup.css'%}" rel="stylesheet">
    <link href="{% static 'lib/hover/hover.min.css'%}" rel="stylesheet">

    <!-- Main Stylesheet File -->
    <link href="{% static 'css/style.css'%}" rel="stylesheet">

    <!-- Responsive css -->
    <link href="{% static 'css/responsive.css'%}" rel="stylesheet">

    <!--animate css modal-->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.2.0/animate.min.css">

    <!--Swiper CSS-->
    <link rel="stylesheet" href="{% static 'dist/css/swiper.min.css'%}">

    <!-- Custom styles for this template -->
    <link href="{% static 'css/business-casual.css'%}" rel="stylesheet">

    <!--css file from animate js-->
    <link href="{% static 'dist/css/animate.min.css'%}" rel="stylesheet">
</head>
<body>
<!-- start section navbar -->
<nav id="main-nav">
    <div class="row">
        <div class="container">
            <div class="responsive"><i data-icon="m" class="ion-navicon-round"></i></div>
            <ul class="nav-menu list-unstyled">
                <li><a class="smoothScroll" href="{% url 'home'%}">Home<span class="sr-only">(current)</span></a></li>
                <li><a class="smoothScroll" href="{% url 'statistics'%}">Statistics</a></li>
                <li><a class="smoothScroll" href="{% url 'WasteCalculator'%}">Waste Calculator</a></li>
                <li><a class="smoothScroll" href="{% url 'SearchLocation'%}">Recycle near you</a></li>
                <li><a class="smoothScroll" href="{% url 'suggestions'%}">Suggestions</a></li>
                <li><a class="smoothScroll" href="{% url 'about'%}">About Us</a></li>
                {% if user.is_authenticated %}
                <li><a class="smoothScroll" href="{% url 'logout' %}">logout</a></li>
                {% endif %}
            </ul>
        </div>
    </div>
</nav>
<!-- End section navbar -->

<!--calculator-->
<!-- start section map visual -->
<div id="about" class="paddsection" style="padding-top: 120px">
    <div class="container">


        <div data-space-between="10" data-direction="vertical" class="swiper-container">
            <div class="parallax-bg" data-swiper-parallax="-23%"></div>


            <div class="swiper-wrapper">

                <!--choose the type of construction-->
                <div class="swiper-slide swiper-no-swiping">

                    <!--<div class="chooseDescription">You are a ...</div>-->

                    <div class="containerForSplitView">
                        <div class="split left">

                            <h3>You are a</h3>
                            <h1>Volume Builder</h1>
                            <button class="btn-dark button" onclick="moveOnePageAfter()">Select</button>
                        </div>
                        <div class="split right">

                            <h3>You are a</h3>
                            <h1>Owner Builder</h1>
                            <button class="btn-dark button" onclick="moveTwoPageAfter()">Select</button>
                        </div>
                    </div>

                </div>
                <div class="swiper-slide swiper-no-swiping chooseKindOfBuilding">


                    <a class="back swiper-button-prev-customized" href="">
                        <span></span>
                    </a>

                    <div class="chooseDescription">choose the type of building</div>

                    <div class="row" style="height: 100%; width: 90%; margin: 100px auto 100px">
                        <div class="containerForCard col-md-3 col-sm-6">
                            <div class="cardView swiper-button-next-customized" value="1">
                                <figure class="front">
                                    <img src="https://source.unsplash.com/QJHzMkfrJpI" alt="front">
                                    <div class="caption">
                                        <h2>Hospital</h2>
                                        <p>Select this</p>

                                    </div>
                                </figure>
                            </div>
                        </div>

                        <div class="containerForCard col-md-3 col-sm-6">
                            <div class="cardView swiper-button-next-customized" value="2">
                                <figure class="front">
                                    <img src="https://source.unsplash.com/v8ZlRRM83Zs" alt="front">
                                    <div class="caption">
                                        <h2>Hotel</h2>
                                        <p>Select this</p>

                                    </div>
                                </figure>
                            </div>
                        </div>

                        <div class="containerForCard col-md-3 col-sm-6">
                            <div class="cardView swiper-button-next-customized" value="3">
                                <figure class="front">
                                    <img src="https://source.unsplash.com/ctUWE7BUEzE" alt="front">
                                    <div class="caption">
                                        <h2>Student Dormitory</h2>
                                        <p>Select this</p>

                                    </div>
                                </figure>
                            </div>
                        </div>

                        <div class="containerForCard col-md-3 col-sm-6">
                            <div class="cardView swiper-button-next-customized" value="4">
                                <figure class="front">
                                    <img src="https://source.unsplash.com/dhvtr5fwbHI" alt="front">
                                    <div class="caption">
                                        <h2>Residential Building</h2>
                                        <p>Select this</p>

                                    </div>
                                </figure>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="swiper-slide swiper-no-swiping typeInDetailPage">

                    <a class="back swiper-button-prev-customized" href="">
                        <span></span>
                    </a>

                    <!--<div class="chooseDescription">Please type in non-negative numbers in boxes below</div>-->

                    <div class="user">

                        <form class="form">


                            <input id="detailBox1" type="text" placeholder="Enter number of bed rooms"
                                   class="form__input" pattern="^[1-9]\d*|0$"/>



                            <input id="detailBox2" type="text" placeholder="Enter number of living rooms"
                                   class="form__input"/>



                            <input id="detailBox3" type="text" placeholder="Enter number of kitchens"
                                   class="form__input"/>



                            <input id="detailBox4" type="text" placeholder="Enter number of car parks"
                                   class="form__input"/>

                            <div class="invalid-tooltip">Please type in non-negative number</div>

                            <button class="btnForCalculator" type="button">Calculate</button>
                        </form>


                        <!--<div class="invalid-feedback">-->
                            <!--Please type in non-negative number-->
                        <!--</div>-->
                    </div>


                    <div id="errorInput" >* Please input valid values</div>


                </div>
                <div class="swiper-slide swiper-no-swiping displayDetailPage">

                    <a class="back swiper-button-prev-customized" href="">
                        <span></span>
                    </a>

                    <div class="chooseDescription">Here is the amount of material you may waste</div>

                    <div class="containerForDisplay">
                        <div class="row" style="margin: 80px auto 50px">
                            <div class="col-md-3 col-sm-6">
                                <div class="card">
                                    <img src="{% static 'img/calculator-brick.jpg'%}">
                                    <h4>Brick</h4>
                                    <p>Waste in units:</p>
                                    <p id="tonesOfBrick">1</p>
                                    <p>Waste cost:</p>
                                    <p id="costOfBrick">2</p>

                                </div>
                            </div>
                            <div class="col-md-3 col-sm-6">
                                <div class="card">
                                    <img src="{% static 'img/calculator-timber.jpg'%}">
                                    <h4>Timber</h4>
                                    <p>Waste in Kg:</p>
                                    <p id="tonesOfTimber">1</p>
                                    <p>Waste cost:</p>
                                    <p id="costOfTimber">2</p>

                                </div>
                            </div>
                            <div class="col-md-3 col-sm-6">
                                <div class="card">
                                    <img src="{% static 'img/calculator-sand.jpg'%}">
                                    <h4>Sand</h4>
                                    <p>Waste in Kg:</p>
                                    <p id="tonesOfSand">1</p>
                                    <p>Waste cost:</p>
                                    <p id="costOfSand">2</p>

                                </div>
                            </div>
                            <div class="col-md-3 col-sm-6">
                                <div class="card">
                                    <img src="{% static 'img/calculator-concrete.jpg'%}">
                                    <h4>Cement</h4>
                                    <p>Waste in Kg:</p>
                                    <p id="tonesOfCement">1</p>
                                    <p>Waste cost:</p>
                                    <p id="costOfCement">2</p>

                                </div>
                            </div>


                        </div>

                        <div class="container" style="text-align: center; margin: 60px auto 40px">
                            <a href="" class="btnToMap yellow swiper-button-next-customized">Check how this affect the environment</a>
                            <a href="{% url 'SearchLocation'%}" class="btnToMap yellow">Check drop sites on map</a>
                        </div>
                    </div>




                </div>

                <div class="swiper-slide swiper-no-swiping">
                    <div class="container">

                        <a class="back swiper-button-prev-customized" href="">
                            <span></span>
                        </a>

                        <div class="chooseDescription">Here is the emissions generate by the waste</div>

                        <div class="container">

                            <div class="row">

                                <div class="col-md-4">
                                    <div class="bubble-speech bubble-right">
                                        <h2 class="author">
                                            CO2
                                        </h2>

                                        <div class="message">
                                            100 metric tonnes
                                        </div>
                                    </div>

                                    <div class="bubble-speech bubble-right">
                                        <h2 class="author">
                                            CH4
                                        </h2>

                                        <div class="message">
                                            100 metric tonnes
                                        </div>
                                    </div>
                                </div>



                                <div class="col-md-4">

                                    <div class="earth">
                                        <div></div>
                                    </div>

                                </div>



                                <div class="col-md-4">

                                    <div class="bubble-speech bubble-left">
                                        <h2 class="author">
                                            N2O
                                        </h2>

                                        <div class="message">
                                            100 metric tonnes
                                        </div>
                                    </div>

                                    <div class="bubble-speech bubble-left">
                                        <h2 class="author">
                                            SF6 and HCFC 22
                                        </h2>

                                        <div class="message">
                                            100 metric tonnes
                                        </div>
                                    </div>

                                </div>



                            </div>

                        </div>


                        <!--<div class="earth">-->
                            <!--<div></div>-->
                        <!--</div>-->



                        <!--<div class="bubble-speech bubble-right">-->
                            <!--<h2 class="author">-->
                                <!--CO2 emissions-->
                            <!--</h2>-->

                            <!--<div class="message">-->
                                <!--100 metric tonnes-->
                            <!--</div>-->
                        <!--</div>-->

                        <!--<div class="bubble-speech bubble-right">-->
                            <!--<h2 class="author">-->
                                <!--CH4 emissions-->
                            <!--</h2>-->

                            <!--<div class="message">-->
                                <!--100 metric tonnes-->
                            <!--</div>-->
                        <!--</div>-->

                        <!--<div class="bubble-speech bubble-left">-->
                            <!--<h2 class="author">-->
                                <!--N2O emissions-->
                            <!--</h2>-->

                            <!--<div class="message">-->
                                <!--100 metric tonnes-->
                            <!--</div>-->
                        <!--</div>-->

                        <!--<div class="bubble-speech bubble-left">-->
                            <!--<h2 class="author">-->
                                <!--SF6 and HCFC 22 emissions-->
                            <!--</h2>-->

                            <!--<div class="message">-->
                                <!--100 metric tonnes-->
                            <!--</div>-->
                        <!--</div>-->



                    </div>

                </div>


            </div>

        </div>

    </div>
    <!--<div style="height: 600px">1</div>-->
</div>

</body>
<!-- end calculator display -->
<!-- start section footer -->
<div id="footer" class="text-center">
    <div class="container">
        <p>&copy; Copyrights Folio. All rights reserved.</p>
        <div class="credits">
            <!--
              All the links in the footer should remain intact.
              You can delete the links only if you purchased the pro version.
              Licensing information: https://bootstrapmade.com/license/
              Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/buy/?theme=Folio
            -->
            Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
        </div>

    </div>
</div>
<!-- End section footer -->

<!--javascript for calculator-->
<!-- Template Main Javascript File -->
<script src="{% static 'js/main.js'%}"></script>

<script src="{% static 'js/calculator.js'%}"></script>

<script src="{% static 'dist/js/swiper.min.js'%}"></script>


<script src="{% static 'js/animatedModal.min.js'%}"></script>

<!--animate js form -->
<script src="{% static 'dist/js/swiper.animate1.0.3.min.js'%}"></script>


<script>

    var numberOfBuildingType = 0;

    // for the split view on second page
    const left = document.querySelector(".left");
    const right = document.querySelector(".right");
    const container = document.querySelector(".containerForSplitView");

    left.addEventListener("mouseenter", () => {
        container.classList.add("hover-left");
    });

    left.addEventListener("mouseleave", () => {
        container.classList.remove("hover-left");
    });

    right.addEventListener("mouseenter", () => {
        container.classList.add("hover-right");
    });

    right.addEventListener("mouseleave", () => {
        container.classList.remove("hover-right");
    });


    //for the third page
    var box1 = $('#detailBox1');
    var box2 = $('#detailBox2');
    var box3 = $('#detailBox3');
    var box4 = $('#detailBox4');



    $('.cardView').click(function () {
        numberOfBuildingType = $(this).attr('value');




        //console.log(numberOfBuildingType, typeof numberOfBuildingType, numberOfBuildingType === "1");
        switch (numberOfBuildingType) {
            case "1":
                //console.log(box1.attr("placeholder"));
                box1.attr("placeholder", "Enter number of hospital rooms");
                box2.attr("placeholder", "Enter number of waiting rooms");
                box3.attr("placeholder", "Enter number of ER rooms");
                box4.attr("placeholder", "Enter number of Equipment storage space");
                break;
            case "2":
                box1.attr("placeholder", "Enter number of hotel rooms");
                box2.attr("placeholder", "Enter number of Serviced apartments");
                box3.attr("placeholder", "Enter number of bathrooms in total");
                box4.attr("placeholder", "Enter number of car parks");
                break;
            case "3":
                box1.attr("placeholder", "Enter number of student rooms");
                box2.attr("placeholder", "Enter number of beds in each room");
                box3.attr("placeholder", "Enter number of bathrooms in total");
                box4.attr("placeholder", "Enter number of car parks");
                break;
            case "4":
                box1.attr("placeholder", "Enter number of one-bedroom units");
                box2.attr("placeholder", "Enter number of two-bedroom units");
                box3.attr("placeholder", "Enter number of three-bedroom units");
                box4.attr("placeholder", "Enter number of car parks");
                break;
        }



    });

    //for the fourth page
    function validationForUserInput(inputBox1, inputBox2, inputBox3, inputBox4) {
        
        let regex = /^(?:[1-9][0-9]*|0)$/;

        if(regex.test(inputBox1)
            || regex.test(inputBox2)
            || regex.test(inputBox3)
            || regex.test(inputBox4)){
            
            // it means one text box has one number 
           console.log(regex.test(inputBox1), regex.test(inputBox2), regex.test(inputBox3), regex.test(inputBox4));
            
            if(inputBox1 == ""){
               box1.val("0");
            }
            
            if(inputBox2 == ""){
               box2.val("0");
            }
            
            if(inputBox3 == ""){
               box3.val("0");
            }
            
            if(inputBox4 == ""){
               box4.val("0");
            }
            
            // again check after filling zeros 
            inputBox1 = $('#detailBox1').val();
            inputBox2 = $('#detailBox2').val();
            inputBox3 = $('#detailBox3').val();
            inputBox4 = $('#detailBox4').val();
            
        }
        //console.log(regex.test(inputBox1), regex.test(inputBox2), regex.test(inputBox3), regex.test(inputBox4))

        return regex.test(inputBox1)
            & regex.test(inputBox2)
            & regex.test(inputBox3)
            & regex.test(inputBox4);
    }


    function clearUserInput() {
        box1.val("");
        box2.val("");
        box3.val("");
        box4.val("");
    }


    var squareMeter;

    const button = document.querySelector('.btnForCalculator');
    const form = document.querySelector('.form');

    console.log(form);


    function clearAnimation() {
        form.classList.remove('form--no');
    }

    button.addEventListener('click', function () {

        let detailBox1 = $('#detailBox1').val();
        let detailBox2 = $('#detailBox2').val();
        let detailBox3 = $('#detailBox3').val();
        let detailBox4 = $('#detailBox4').val();

        var inputIsValid = validationForUserInput(detailBox1, detailBox2, detailBox3, detailBox4);
        console.log(inputIsValid);

        if (!inputIsValid) {
            form.classList.add('form--no');
            setTimeout(clearAnimation, 1000);

            //error message

            $('#errorInput').css("visibility", "visible");
            clearUserInput();


            // setTimeout(function () {
            //     $('#errorInput').css("visibility", "collapse");
            // },5000);

        } else {

            // console.log(form.classList);
            //form.classList.remove('form--no');
            // console.log(form.classList);
            //

            switch (numberOfBuildingType) {
                case 0:
                    //house
                    squareMeter = detailBox1 * 21.46 + detailBox2 * 23.78 + detailBox3 * 17.9 + detailBox4 * 15.7;
                    break;
                case "1":
                    //hospital
                    squareMeter = detailBox1 * 70 + detailBox2 * 120 + detailBox3 * 65 + detailBox4 * 40;
                    break;
                case "2":
                    //hotel
                    squareMeter = detailBox1 * 30.6 + detailBox2 * 62.6 + detailBox3 * 6 + detailBox4 * 15.7;
                    break;
                case "3":
                    //student accommodation
                    squareMeter = detailBox1 * 12 + detailBox2 * 2.18 + detailBox3 * 6 + detailBox4 * 15.7;
                    break;
                case "4":
                    //residential
                    squareMeter = detailBox1 * 58 + detailBox2 * 91 + detailBox3 * 148 + detailBox4 * 15.7;
                    break;


            }

            //console.log(squareMeter);

            var tonesOfBrick = parseFloat(Math.round(squareMeter * 64000 / 93 * 0.08 * 100) / 100).toFixed(2);
            var costOfBrick = parseFloat(Math.round(tonesOfBrick * 1.859 * 100) / 100).toFixed(0);

            var tonesOfTimber = parseFloat(Math.round(squareMeter * 18880 / 93 * 0.06 * 100) / 100).toFixed(2);
            var costOfTimber = parseFloat(Math.round(tonesOfTimber * 5 * 100) / 100).toFixed(0);

            var tonesOfSand = parseFloat(Math.round(squareMeter * 164540 / 186 * 0.02 * 100) / 100).toFixed(2);
            var costOfSand = parseFloat(Math.round(tonesOfSand * 0.4 * 100) / 100).toFixed(0);

            var tonesOfCement = parseFloat(Math.round(squareMeter * 17052 / 93 * 0.04 * 100) / 100).toFixed(2);
            var costOfCement = parseFloat(Math.round(tonesOfCement * 0.7 * 100) / 100).toFixed(0);

            //console.log(tonesOfBrick, costOfBrick);


            $('#tonesOfBrick').text(tonesOfBrick);
            $('#costOfBrick').text("$ " + costOfBrick);
            $('#tonesOfTimber').text(tonesOfTimber);
            $('#costOfTimber').text("$ " + costOfTimber);
            $('#tonesOfSand').text(tonesOfSand);
            $('#costOfSand').text("$ " + costOfSand);
            $('#tonesOfCement').text(tonesOfCement);
            $('#costOfCement').text("$ " + costOfCement);

            moveToDisplayPage();

            clearUserInput();
        }


    });


    //init the swiper
    var swiper = new Swiper('.swiper-container', {
        //direction: 'vertical',

        speed: 400,
        // spaceBetween: 100,
        autoHeight: true, //enable auto height

        // need navigation button
        navigation: {
            nextEl: '.swiper-button-next-customized',
            prevEl: '.swiper-button-prev-customized',
        },

        on: {
            init: function () {

                //hide animate
                swiperAnimateCache(this);

                //start animate
                swiperAnimate(this);
            },
            slideChangeTransitionEnd: function () {
                swiperAnimate(this);
            },
        }
    });


    function moveTwoPageAfter() {
        swiper.slideTo($('.typeInDetailPage').index(), 1000, false);
    }

    function moveOnePageAfter() {
        swiper.slideTo($('.chooseKindOfBuilding').index(), 1000, false);
    }

    function moveToDisplayPage() {
        swiper.slideTo($('.displayDetailPage').index(), 1000, false);
    }

</script>
</html>
